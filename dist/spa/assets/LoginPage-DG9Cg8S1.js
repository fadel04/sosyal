import{Q as K}from"./QImg-Ci4i37rz.js";import{v as O,a as y,Q as v,b as h}from"./QBtn-DYZTwiAx.js";import{q as G,a as H,c as W,i as Y,n as q,l as Z,m as z,Q as J,o as X,p as $,k as ee,C as oe}from"./useApi-BvUqY1tE.js";import{c as N,r as T,U as ae,L as te,K as se,u as ne,h as V,g as M,t as I,v as le,Y as re,a as F,_ as ie,Z as de,A as x,B as w,C as n,E as i,D as t,F as S,H as _,G as L,x as ue}from"./index-Do2U6s1M.js";import{h as Q}from"./dom-yNob52VE.js";import{Q as ce}from"./QPage-Dcfz10FS.js";import{u as me}from"./useAuthToken-DmPVqjwS.js";import"./scroll-BnXb6wY2.js";import"./axios-CrDRZsLl.js";const fe=N({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:o,emit:f}){const e=M(),d=T(null);let u=0;const a=[];function b(s){const c=typeof s=="boolean"?s:r.noErrorFocus!==!0,C=++u,B=(l,m)=>{f(`validation${l===!0?"Success":"Error"}`,m)},A=l=>{const m=l.validate();return typeof m.then=="function"?m.then(g=>({valid:g,comp:l}),g=>({valid:!1,comp:l,err:g})):Promise.resolve({valid:m,comp:l})};return(r.greedy===!0?Promise.all(a.map(A)).then(l=>l.filter(m=>m.valid!==!0)):a.reduce((l,m)=>l.then(()=>A(m).then(g=>{if(g.valid===!1)return Promise.reject(g)})),Promise.resolve()).catch(l=>[l])).then(l=>{if(l===void 0||l.length===0)return C===u&&B(!0),!0;if(C===u){const{comp:m,err:g}=l[0];if(g!==void 0&&console.error(g),B(!1,m),c===!0){const E=l.find(({comp:R})=>typeof R.focus=="function"&&O(R.$)===!1);E!==void 0&&E.comp.focus()}}return!1})}function k(){u++,a.forEach(s=>{typeof s.resetValidation=="function"&&s.resetValidation()})}function U(s){s!==void 0&&I(s);const c=u+1;b().then(C=>{c===u&&C===!0&&(r.onSubmit!==void 0?f("submit",s):s!==void 0&&s.target!==void 0&&typeof s.target.submit=="function"&&s.target.submit())})}function D(s){s!==void 0&&I(s),f("reset"),le(()=>{k(),r.autofocus===!0&&r.noResetFocus!==!0&&p()})}function p(){G(()=>{if(d.value===null)return;const s=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),c=>c.tabIndex!==-1);s?.focus({preventScroll:!0})})}ae(re,{bindComponent(s){a.push(s)},unbindComponent(s){const c=a.indexOf(s);c!==-1&&a.splice(c,1)}});let P=!1;return te(()=>{P=!0}),se(()=>{P===!0&&r.autofocus===!0&&p()}),ne(()=>{r.autofocus===!0&&p()}),Object.assign(e.proxy,{validate:b,resetValidation:k,submit:U,reset:D,focus:p,getValidationComponents:()=>a}),()=>V("form",{class:"q-form",ref:d,onSubmit:U,onReset:D},Q(o.default))}}),j=N({name:"QBanner",props:{...H,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(r,{slots:o}){const{proxy:{$q:f}}=M(),e=W(r,f),d=F(()=>"q-banner row items-center"+(r.dense===!0?" q-banner--dense":"")+(e.value===!0?" q-banner--dark q-dark":"")+(r.rounded===!0?" rounded-borders":"")),u=F(()=>`q-banner__actions row items-center justify-end col-${r.inlineActions===!0?"auto":"all"}`);return()=>{const a=[V("div",{class:"q-banner__avatar col-auto row items-center self-start"},Q(o.avatar)),V("div",{class:"q-banner__content col text-body2"},Q(o.default))],b=Q(o.action);return b!==void 0&&a.push(V("div",{class:u.value},b)),V("div",{class:d.value+(r.inlineActions===!1&&b!==void 0?" q-banner--top-padding":""),role:"alert"},a)}}}),ge={setup(){de();const{login:r,error:o,formData:f,loading:e,res:d,signData:u,signUp:a,signUpc:b,createData:k}=Y(),{saveToken:U,token:D}=me(),p=F(()=>f.username.trim()!==""&&f.password.trim()!==""),P=T(!0);return{login:r,error:o,formData:f,token:D,isPassword:P,requiredRule:c=>c&&c.length>0||"Please type something",isFormFilled:p,signData:u,signUpc:b,loading:e,res:d,signUp:a,createData:k}}},ve={class:"row justify-center bg-secondary"},be={class:"q-px-xl column shadow-3"},pe={class:"text-center q-mb-xl q-pb-xl"},ye={class:"column q-mt-sm"},qe={class:"q-mt-sm text-right"},xe={class:"column q-mt-sm"},we={class:"text-center q-mt-md"},Ve={class:"text-center q-mt-sm"};function ke(r,o,f,e,d,u){return x(),w(ce,{padding:"",class:"bg-primary flex flex-center"},{default:n(()=>[i("div",ve,[i("div",be,[i("div",pe,[t(K,{src:"src/assets/logo.png",class:"logo q-pa-lg"})]),o[14]||(o[14]=i("div",{class:"text-grey-7 q-mt-md"},"Please login your account below",-1)),i("div",ye,[t(fe,{onSubmit:e.login,class:"q-gutter-sm"},{default:n(()=>[t(q,{filled:"",label:"Enter user *","lazy-rules":"",rules:[e.requiredRule],modelValue:e.formData.username,"onUpdate:modelValue":o[0]||(o[0]=a=>e.formData.username=a)},{prepend:n(()=>[t(y,{name:"email"})]),_:1},8,["rules","modelValue"]),t(q,{class:"q-mt-sm",label:"Enter password *",hint:e.error,"lazy-rules":"",rules:[e.requiredRule],filled:"",modelValue:e.formData.password,"onUpdate:modelValue":o[2]||(o[2]=a=>e.formData.password=a),type:e.isPassword?"password":"text"},{prepend:n(()=>[t(y,{name:"lock"})]),append:n(()=>[t(y,{onClick:o[1]||(o[1]=a=>e.isPassword=!e.isPassword),name:e.isPassword?"visibility_off":"visibility"},null,8,["name"])]),_:1},8,["hint","rules","modelValue","type"]),i("div",qe,[t(v,{class:"q-ma-none","no-caps":"",color:"indigo",flat:"",onClick:o[3]||(o[3]=a=>e.signUpc=!0)},{default:n(()=>o[10]||(o[10]=[S(" Sign Up ")])),_:1})]),i("div",xe,[t(v,{type:"submit",color:e.isFormFilled?"indigo":"grey",disabled:!e.isFormFilled},{default:n(()=>[o[11]||(o[11]=S(" Login ")),e.loading?(x(),w(h,{key:0,class:"q-ml-sm"})):_("",!0)]),_:1},8,["color","disabled"])])]),_:1},8,["onSubmit"]),t(ee,{modelValue:e.signUpc,"onUpdate:modelValue":o[9]||(o[9]=a=>e.signUpc=a),persistent:"",class:"q-pa-xl column shadow-3"},{default:n(()=>[t(Z,{style:{height:"100%",width:"60%"}},{default:n(()=>[t(z,null,{default:n(()=>o[12]||(o[12]=[i("div",{class:"text-h6"},"Sign Up",-1)])),_:1}),t(z,{class:"q-pt-none"},{default:n(()=>[t(q,{label:"Enter name *",modelValue:e.signData.name,"onUpdate:modelValue":o[4]||(o[4]=a=>e.signData.name=a),autofocus:"","lazy-rules":"",rules:[e.requiredRule],filled:""},null,8,["modelValue","rules"]),t(q,{label:"Enter username *",modelValue:e.signData.username,"onUpdate:modelValue":o[5]||(o[5]=a=>e.signData.username=a),autofocus:"","lazy-rules":"",rules:[e.requiredRule],filled:""},null,8,["modelValue","rules"]),t(q,{class:"q-mt-sm",label:"Enter password *",autofocus:"","lazy-rules":"",rules:[e.requiredRule],filled:"",modelValue:e.signData.password,"onUpdate:modelValue":o[7]||(o[7]=a=>e.signData.password=a),type:e.isPassword?"password":"text"},{prepend:n(()=>[t(y,{name:"lock"})]),append:n(()=>[t(y,{onClick:o[6]||(o[6]=a=>e.isPassword=!e.isPassword),name:e.isPassword?"visibility_off":"visibility"},null,8,["name"])]),_:1},8,["rules","modelValue","type"]),t(v,{round:"",color:"blue"},{default:n(()=>[t(J,{icon:"add"},{default:n(()=>[t(X,{"bottom-slots":"",modelValue:e.signData.image,"onUpdate:modelValue":o[8]||(o[8]=a=>e.signData.image=a),accept:"image/*",counter:""},null,8,["modelValue"])]),_:1})]),_:1}),e.error?(x(),w(j,{key:0,color:"negative",class:"q-mt-md"},{default:n(()=>[S(L(e.error),1)]),_:1})):_("",!0),e.res?(x(),w(j,{key:1,color:"green",class:"q-mt-md"},{default:n(()=>[S(L(e.res),1)]),_:1})):_("",!0)]),_:1}),t($,{align:"right",class:"text-primary"},{default:n(()=>[ue(t(v,{flat:"",label:"Close"},null,512),[[oe]]),t(v,{flat:"",label:"Sign Up",onClick:e.signUp,color:"amber"},{default:n(()=>[e.loading?(x(),w(h,{key:0,class:"q-ml-sm"})):_("",!0)]),_:1},8,["onClick"])]),_:1}),o[13]||(o[13]=i("div",{class:"text-grey-7 text-center q-mt-xl"}," Sign Up With Social Media ",-1)),i("div",we,[t(v,{flat:"",round:"",size:"lg",class:"q-ma-xs",color:"red",icon:"email"}),t(v,{flat:"",round:"",size:"lg",class:"q-ma-xs",color:"primary",icon:"facebook"})])]),_:1})]),_:1},8,["modelValue"])]),o[15]||(o[15]=i("div",{class:"text-grey-7 text-center q-mt-xl"}," Login with Social Media ",-1)),i("div",Ve,[t(v,{flat:"",round:"",size:"lg",class:"q-ma-xs",color:"red",icon:"email"}),t(v,{flat:"",round:"",size:"lg",class:"q-ma-xs",color:"primary",icon:"facebook"})])])])]),_:1})}const Ee=ie(ge,[["render",ke],["__scopeId","data-v-ac2eeeb7"],["__file","LoginPage.vue"]]);export{Ee as default};
